<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_hero_stand</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>ob_heroparent</parentName>
  <maskName>sp_hero_stand</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>604</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_inherited</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>hurt = false
arrow  = noone

image_speed = 0.1
forward = 1 // 1 или -1 
feetcollision = false
gravity = 0.4

accel = 0 
jumpaccel =0
fallmaxspeed = 15
maxspeed = 1.5
xspeed = 0
yspeed = 0
shoot = true
recover = false
canjump = true
powerjump = 0

weapcount = 3
weapons[2] = ob_shot3
weapons[1] = ob_shot2
weapons[0] = ob_shot1

weapslot = 0
weapon = weapons[0]

maxhealth = 6
health  = maxhealth

dead = false
alarm[0] = -1

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>RESTART AFTER DEATH</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Restore stats

hurt = false
dead = false
health = 6
//if arrow != noone arrow.phase = ar_Disappear
arrow = noone
hspeed = 0
vspeed = 0
accel = 0
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>604</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_inherited</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>hurt</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>false</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// control
var animType = sp_hero_stand

// Кнопки
if keys[k_Left] {
    forward = -1
    accel = 0.1 * forward
    animType = sp_hero_move
} 
if keys[k_Right] {
    forward = 1
    accel = 0.1 * forward
    animType = sp_hero_move
} 
if keys[k_Jump] {
    if canjump { 
        if feetcollision {   
            vspeed = -4.5
            animType = sp_hero_jump
            powerjump = 9
            canjump = false
            sc_play_sound(sn_jump, false)
        }
    }    
    if powerjump &gt; 0 {
        powerjump--
        vspeed = -4.5
    }
} else {
    canjump = true
    powerjump = 0
}   
   
    
if (abs(vspeed) &gt; 0) or (feetcollision == false) {
    animType = sp_hero_jump
    gravity = 0.4
}

if keys[k_Fire] {
   if feetcollision
     animType = sp_hero_fire
   else
     animType = sp_hero_jumpfire
   if shoot {
      with instance_create(x, y-7, weapon) {
         forward = hero.forward
         other.alarm[1] = reloadtime    // set reload to player
      }
      shoot = false
   }  
   
} else shoot = true

if (not (keys[k_Left] or keys[k_Right]) or keys[k_Fire] or keys[k_altFire]) and feetcollision {
    accel = 0
    hspeed *= 0.8
}  

if keys[k_altFire] {
    if arrow == noone arrow = instance_create(0,0,ob_arrow)
    animType = sp_hero_arrow
    image_index = 0
    canjump = false
    shoot = false
    if arrow.phase == ar_Stay arrow.phase = ar_Recall
} else {
    if arrow != noone {
        if (arrow.phase == ar_Appear) or (arrow.phase == ar_Recall) arrow.phase = ar_Disappear
        if arrow.phase == ar_Hold {
            image_index = 1
            arrow.phase = ar_Launch
            sc_play_sound(sn_arrow2, false)
            arrow.vspeed = -4
            if image_index &lt; 3.9 {
                animType = sp_hero_arrow
                canjump = false
                shoot = false
                accel = 0
            }
        }
    } 
}    



image_xscale = forward
sprite_index = animType



</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// process move

vspeed += jumpaccel
hspeed += accel
if abs(hspeed)&gt;maxspeed hspeed = maxspeed*forward
if vspeed&gt;fallmaxspeed vspeed = fallmaxspeed

if hurt {
    if arrow != noone {
        if (arrow.phase == ar_Appear) or (arrow.phase == ar_Recall) arrow.phase = ar_Disappear
        if arrow.phase == ar_Hold {
            arrow.vspeed = -4
            arrow.phase = ar_Launch       
        }
    }
    if image_index &gt;2.8 {
        sprite_index = sp_hero_jump
        hurt = false
        recover = true
        alarm[2] = 60  // time of recover
//        alarm[3] = room_speed * 0.1  // flashing speed
    }
}


</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>604</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_inherited</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// check status

if health == 0 {
    sprite_index = sp_hero_dead
}
    
feetcollision = false

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="ob_arrow">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Step on arrow
//if dead exit

if arrow.phase == ar_Stay {
    event_perform(ev_collision, ob_lift)
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="ob_eyefloor">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Check collision eye
if dead exit

image_xscale = 1

mask_index = sp_coll_up
if place_meeting(x, y, other) {
  while place_meeting(x, y, other) y++   
  vspeed = 0
}

mask_index = sp_coll_down
if place_meeting(x, y, other) {
  while place_meeting(x, y, other) y--   
  y += 2
  gravity = 0
  vspeed = 0
  feetcollision = true
}

mask_index = sp_coll_right
if place_meeting(x, y, other) {
  while place_meeting(x, y, other) x--   
  hspeed = 0
}

mask_index = sp_coll_left
if place_meeting(x, y, other) {
  while place_meeting(x, y, other) x++   
  hspeed = 0
}

mask_index = sp_hero_stand
image_xscale = forward

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="ob_crashfloor">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Check collision
if dead exit
if other.awake exit


if vspeed &gt;= 0 {        // only if you fall
    mask_index = sp_coll_down
    if place_meeting(x, y, other) {
      while place_meeting(x, y, other) y--   
      y += 2
      gravity = 0
      vspeed = 0
      feetcollision = true
    }
    mask_index = sp_hero_stand
}



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="ob_spike">
      <action>
        <libid>1</libid>
        <id>604</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_inherited</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// spike of hurt
if dead exit
if hurt exit
if recover exit

x -= hspeed
y -= vspeed
vspeed = -5.75
gravity = 0.4
hspeed = -maxspeed * forward
accel = 0

sprite_index = sp_hero_hurt

hurt = true
health -- 


</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Play sound

sc_play_sound(sn_hurt, false)

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="ob_wall">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Check collision
if dead exit
image_xscale = 1

mask_index = sp_coll_up
if place_meeting(x, y, other) {
  while place_meeting(x, y, other) y++   
  vspeed = 0
}

mask_index = sp_coll_down
if place_meeting(x, y, other) {
  while place_meeting(x, y, other) y--   
  y += 2
  gravity = 0
  vspeed = 0
  feetcollision = true
}

mask_index = sp_coll_right
if place_meeting(x, y, other) {
  while place_meeting(x, y, other) x--   
  hspeed = 0
}

mask_index = sp_coll_left
if place_meeting(x, y, other) {
  while place_meeting(x, y, other) x++   
  hspeed = 0
}

image_xscale = forward
mask_index = sp_hero_stand

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="ob_lift">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Check collision lift

mask_index = sp_coll_down
event_inherited()
mask_index = sp_hero_stand

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// When goto next room

arrow = noone
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,16</point>
    <point>20,20</point>
  </PhysicsShapePoints>
</object>
